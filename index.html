<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="renderer" content="webkit" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=0" />
    <title>pure-admin-thin</title>
    <link rel="icon" href="/kpIcon.ico" />
    <script>
      window.process = {}
    </script>
  </head>

<body>
<div id="app">
	<style>
        /* Loading Animation Styles */
        :root {
            --primary-color: #406eeb;
            --bg-light: #ffffff;
            --bg-dark: #121212;
            --anim-duration: 2.4s;
        }

        html,
        body,
        #app {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        body {
            background: var(--bg-light);
            transition: background 0.3s ease;
        }

        /* 核心修改1：默认隐藏动画 */
        .loading-wrap {
            display: none; /* 默认不显示 */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            gap: 24px;
            /* 防止动画闪烁 */
            will-change: opacity, display;
        }

        /* 只有延迟后才显示动画 */
        .loading-wrap.show {
            display: flex;
        }

        .loading-logo {
            width: 120px;
            height: 93px;
            object-fit: contain;
            opacity: 1;
            filter: drop-shadow(0 0 0 rgba(64, 110, 235, 0));
            animation: logo-glow var(--anim-duration) infinite ease-in-out;
        }

        .loading-dots {
            display: flex;
            gap: 8px;
            height: 10px;
            align-items: center;
        }

        .dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--primary-color);
            opacity: 0.2;
            animation: dot-fade var(--anim-duration) infinite ease-in-out;
        }

        .dot:nth-child(1) {
            animation-delay: 0s;
        }

        .dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes logo-glow {
            0%, 100% {
                opacity: 0.5;
                filter: drop-shadow(0 2px 4px rgba(64, 110, 235, 0));
            }
            50% {
                opacity: 1;
                filter: drop-shadow(0 0 20px rgba(64, 110, 235, 0.4));
            }
        }

        @keyframes dot-fade {
            0%, 100% {
                opacity: 0.2;
                transform: translateY(0);
            }
            50% {
                opacity: 0.8;
                transform: translateY(-2px);
            }
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            body {
                background: var(--bg-dark);
            }
            .loading-logo {
                filter: drop-shadow(0 0 25px rgba(64, 110, 235, 0.6));
            }
            .dot {
                background: #7da3ff;
            }
        }
	</style>
	<div class="loading-wrap" id="loadingWrap">
		<img src="/logo_kp.png" class="loading-logo" alt="Logo">
		<div class="loading-dots">
			<span class="dot"></span>
			<span class="dot"></span>
			<span class="dot"></span>
		</div>
	</div>
</div>

<!-- 核心控制逻辑 -->
<script>
    const loadingWrap = document.getElementById('loadingWrap');
    let loadingTimer = null;

    // 1. 延迟300ms显示动画（300ms是用户感知"无延迟"的阈值）
    // 页面加载<300ms → 定时器还没触发，动画不会显示
    loadingTimer = setTimeout(() => {
        loadingWrap.classList.add('show');
    }, 300);

    // 2. 页面加载完成（包括资源、Vue应用挂载）后，立即隐藏动画
    function hideLoading() {
        clearTimeout(loadingTimer); // 取消延迟显示
        loadingWrap.classList.remove('show');
        loadingWrap.remove(); // 彻底移除动画元素，释放资源
    }

    // 监听页面加载完成事件
    window.addEventListener('load', hideLoading);

    // 兼容Vue应用挂载完成的场景（防止load事件触发前Vue已挂载）
    // 给Vue暴露一个全局方法，在main.ts挂载完成后调用
    window.hideLoading = hideLoading;
</script>

<script type="module" src="/src/main.ts"></script>
</body>

</html>